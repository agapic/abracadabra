var app=angular.module("abra",["ngRoute","ui.bootstrap","ngResource","angularSpinners","chart.js"]);app.config(["$routeProvider",function(a){a.when("/",{controller:"IndexController",templateUrl:"views/index.html"}).when("/items",{controller:"ItemController",templateUrl:"views/items.html"}).when("/items/:type/:itemId",{controller:"ItemDataController",templateUrl:"views/itemData.html"}).when("/items/:type/:region/:itemId",{controller:"ItemDataController",templateUrl:"views/itemData.html"}).otherwise({templateUrl:"views/404.html",resolve:{err:function(){return{status:404}}}})}]).config(["$locationProvider",function(a){a.hashPrefix("!")}]),app.controller("IndexController",["$scope",function(a){}]),app.controller("ItemController",["$scope","$http","$location","$routeParams","Item",function(a,b,c,d,e){a.itemImages=[],a.init=function(){e.get_item_files({},function(b){a.itemImages=b},function(a){console.log("err"+a)})},a.getImagePath=function(a){return"/img/item/"+a}}]),app.controller("ItemDataController",["$scope","$http","$location","$routeParams","Item","spinnerService",function(a,b,c,d,e,f){function g(a,b){for(var c=[],d=0;d<b.length;d++)b[d].name===a&&c.push(b[d]);return c}a.items=[],a.data=[],a.spinnerService=f,a.init=function(){$index=-1,f.show("itemSpinner1"),f.show("itemSpinner2");var b=d.type,c=d.region,h=d.itemId;console.log(b,c,h),e.item_query({type:b,region:c,itemId:h},function(b){a.items=b["5-11"],console.log(b);for(var c=[0],d=[0],e=[],f=0;f<b.length&&-1===e.indexOf(b[f].name);f++){e.push(b[f].name);for(var h=g(b[f].name,b),i=0;i<h.length;i++)"5.11"===h[i].matchversion&&(c=[h[i].it0wins]),"5.14"===h[i].matchversion&&(d=[h[i].it0wins]);a.data[f]=[c,d]}},function(a){console.log(Object.keys(a))})},a.labels=["1","2","3","4","5","6"],a.series=["Patch 5.11","Patch 5.14"],a.$watch("items",function(a){a&&f.hideAll()})}]),window.app.factory("Item",["$resource",function(a){return a("api/:action/:type/:region/:itemId",{},{get_item_files:{method:"GET",isArray:!0,params:{action:"items"}},item_query:{method:"GET",isArray:!1,params:{action:"items",type:"type",region:"region",itemId:"itemId"}}})}]),app.filter("split",function(){return function(a,b,c){return a.split(b)[c]}});